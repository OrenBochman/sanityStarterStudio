{"version":3,"sources":["../../src/lib/mapResults.js"],"names":["scoreToRating","helpers","mapResult","result","key","id","getIdentifier","mappedResult","score","rating","hasMarks","marker","getMarker","text","markerId","length","processResult","mappedResults","errorsResults","push","considerationsResults","problemsResults","improvementsResults","goodResults","getIconForScore","icon","color","colors","$color_grey_disabled","$color_green_medium_light","$color_green_medium","$color_ok","$color_red","mapResults","results","keywordKey","i"],"mappings":"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","sourcesContent":["/**\n * Lightly edited version of:\n * https://github.com/Yoast/wordpress-seo/blob/0742e9b6ba4c0d6ae9d65223267a106b92a6a4a1/js/src/components/contentAnalysis/mapResults.js\n */\nimport {helpers} from 'yoastseo'\nimport {colors} from './colors'\n\nconst {scoreToRating} = helpers\n\n/**\n * Mapped result definition.\n * @typedef {Object} MappedResult\n * @property {string} rating\n * @property {bool} hasMarks\n * @property {string} text\n * @property {string} id\n * @property {func} marker\n * @property {number} score\n * @property {string} markerId\n */\n\n/**\n * Mapped results definition.\n * @typedef {Object} MappedResults\n * @property {Array<MappedResult>} errorsResults\n * @property {Array<MappedResult>} problemsResults\n * @property {Array<MappedResult>} improvementsResults\n * @property {Array<MappedResult>} goodResults\n * @property {Array<MappedResult>} considerationsResults\n */\n\n/**\n * Maps a single results to a result that can be interpreted by yoast-component's ContentAnalysis.\n *\n * @param {object} result Result provided by YoastSEO.js.\n * @param {string} key    The keyword key to use for the marker id.\n *\n * @returns {MappedResult} The mapped result.\n */\nfunction mapResult(result, key = '') {\n  const id = result.getIdentifier()\n  const mappedResult = {\n    score: result.score,\n    rating: scoreToRating(result.score),\n    hasMarks: result.hasMarks(),\n    marker: result.getMarker(),\n    id,\n    text: result.text,\n    markerId: key.length > 0 ? `${key}:${id}` : id,\n  }\n\n  // Because of inconsistency between YoastSEO and yoast-components.\n  if (mappedResult.rating === 'ok') {\n    mappedResult.rating = 'OK'\n  }\n\n  return mappedResult\n}\n\n/**\n * Adds a mapped results to the appropriate array in the mapped results object.\n *\n * @param {MappedResult} mappedResult The mapped result.\n * @param {MappedResults} mappedResults The mapped results.\n *\n * @returns {MappedResults} The mapped results object with the added result.\n */\nfunction processResult(mappedResult, mappedResults) {\n  switch (mappedResult.rating) {\n    case 'error':\n      mappedResults.errorsResults.push(mappedResult)\n      break\n    case 'feedback':\n      mappedResults.considerationsResults.push(mappedResult)\n      break\n    case 'bad':\n      mappedResults.problemsResults.push(mappedResult)\n      break\n    case 'OK':\n      mappedResults.improvementsResults.push(mappedResult)\n      break\n    case 'good':\n      mappedResults.goodResults.push(mappedResult)\n      break\n    default:\n      break\n  }\n  return mappedResults\n}\n\n/**\n * Retrieves the icons and colors for the icon for a certain result.\n *\n * @param {string} score The score for which to return the icon and color.\n *\n * @returns {Object} The icon and color for the score.\n */\nexport function getIconForScore(score) {\n  let icon = {icon: 'seo-score-none', color: colors.$color_grey_disabled}\n\n  switch (score) {\n    case 'loading':\n      icon = {icon: 'loading-spinner', color: colors.$color_green_medium_light}\n      break\n    case 'good':\n      icon = {icon: 'seo-score-good', color: colors.$color_green_medium}\n      break\n    case 'ok':\n      icon = {icon: 'seo-score-ok', color: colors.$color_ok}\n      break\n    case 'bad':\n      icon = {icon: 'seo-score-bad', color: colors.$color_red}\n      break\n    default:\n      break\n  }\n\n  return icon\n}\n\n/**\n * Maps results to object, to be used by the ContentAnalysis component.\n *\n * Takes in the YoastSEO.js results and maps them to the appropriate objects, so they can be used by the\n * ContentAnalysis component from @yoast/analysis-report.\n *\n * @param {object} results    Results provided by YoastSEO.js.\n * @param {string} keywordKey The key of the keyword that these results represent.\n *\n * @returns {MappedResults} The mapped results.\n */\nexport default function mapResults(results, keywordKey = '') {\n  let mappedResults = {\n    errorsResults: [],\n    problemsResults: [],\n    improvementsResults: [],\n    goodResults: [],\n    considerationsResults: [],\n  }\n  if (!results) {\n    return mappedResults\n  }\n  for (let i = 0; i < results.length; i++) {\n    const result = results[i]\n    if (!result.text) {\n      continue\n    }\n    const mappedResult = mapResult(result, keywordKey)\n    mappedResults = processResult(mappedResult, mappedResults)\n  }\n  return mappedResults\n}\n"],"file":"mapResults.js"}